{% extends 'layout.twig' %}

{% block body %}

<div class="row">
    <div class="col-xs-12 panel">
        <div class="page-header">
            <h1>Add image</h1>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <form action="{{ path_for('picture.add') }}" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <input type="file" id="picture-file" name="picture-file">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Choose file..." readonly>
                            <span class="input-group-btn input-group-sm">
                                <button type="button" class="btn btn-fab btn-fab-mini">
                                    <i class="material-icons">attach_file</i>
                                </button>
                            </span>
                        </div>
                    </div>
                    <div id="picture-container"></div>
                    <div id="crop-pic-container" class="checkbox" style="display: none;">
                        <label>
                            <input type="checkbox" name="crop-pic" id="crop-pic" checked> Crop picture
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="caption">Caption</label>
                        <textarea name="caption" id="caption" class="form-control"></textarea>
                    </div>

                    <input type="hidden" name="x" id="pic-x">
                    <input type="hidden" name="y" id="pic-y">
                    <input type="hidden" name="x2" id="pic-x2">
                    <input type="hidden" name="y2" id="pic-y2">
                    <input type="hidden" name="width" id="pic-width">
                    <input type="hidden" name="height" id="pic-height">
                    <input type="hidden" name="original-width" id="original-width">
                    <input type="hidden" name="original-height" id="original-height">

                    {{ csrf.field|raw }}
                    <input type="submit" class="btn btn-primary btn-raised" value="Post picture">
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ base_url() }}/css/jquery.Jcrop.min.css">
{% endblock %}

{% block scripts %}
    <script src="{{ base_url() }}/js/load-image.all.min.js"></script>
    <script src="{{ base_url() }}/js/jquery.Jcrop.min.js"></script>
    <script src="{{ base_url() }}/js/post-picture.js"></script>
{% endblock %}
